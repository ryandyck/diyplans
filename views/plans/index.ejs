<% include ../partials/header %>

<div class="jumbotron jumbotron-fluid">
    <video preload autoplay muted loop poster="https://dummyimage.com/900x400/000/fff">    
        <source src="images/23023897-preview.mp4" type="video/mp4">
    </video>
    <div class="container text-white">
        <h1 class="display-4">DIY Plans</h1>
        <p class="lead">Gunna build some sick stuff heck ya</p>
        <hr class="my-4">
        <p>Share some plans yo</p>
        <a class="btn btn-primary btn-lg" href="/plans/new">Add New Plan</a>
    </div>
</div>

<!-- adds some spacing on the sides -->
<div class="container">
    <div class="form-group">
        <select form="main_page_form" name="filter">
            <option value="fabrication">Fabrication</option>
            <option value="machining">Machining</option>
            <option value="construction">Construction</option>
            <option value="woodworking">Woodworking</option>
            <option value="custom_projects">Custom Projects</option>
            <option selected value="no_filter">No Filter</option>
        </select>
    </div>
    <form id="main_page_form" action="/plans" method="GET" class="">
        <div class="form-group">
            <input type="text" name="search" placeholder="Plan search..." class="form-control">
            <!-- <input type="submit" value="search" class="btn btn-default"> -->
        <div>
        <div class="form-group">
            <button class="brn btn-lg btn-primary btn-block">Submit!</button>
        </div>
    </form>
    <div class="row text-center">
        <div class="col-md-12">
            <% if(noMatch !== undefined) { %>
                <h3><%= noMatch %></h3>
            <% } %>
        </div>
        <% plans.forEach(function(i){ %>
            <div class="col-lg-3 col-md-4 col-sm-6 mb-4">
                <div class="card">
                    <img src="<%= i.image %>" class="card-img-top" alt="<%= i.name %>">
                    <div class="card-body">
                        <h5 class="card-title"><%= i.name %></h5>
                        <!--<p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>-->
                        <a href="/plans/<%= i._id %>" class="btn btn-primary">More Info</a>
                    </div>
                </div>
            </div>
        <% }); %>
    </div>
</div>

<!-- <script>
function deferVideo() {

    //defer html5 video loading
  $("video source").each(function() {
    var sourceFile = $(this).attr("data-src");
    $(this).attr("src", sourceFile);
    var video = this.parentElement;
    video.load();
    // uncomment if video is not autoplay
    //video.play();
  });

}
window.onload = deferVideo;
</script> -->

<% include ../partials/footer %>